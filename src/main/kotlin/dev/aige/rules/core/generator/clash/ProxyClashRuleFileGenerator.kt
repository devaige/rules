package dev.aige.rules.core.generator.clash

import dev.aige.rules.core.entities.ClashRule
import dev.aige.rules.provider.acl4ssr.entities.ACL4SSRFile
import dev.aige.rules.provider.blackmatrix.addBlackMatrixFileRules
import dev.aige.rules.provider.blackmatrix.entities.BlackMatrixPath

class ProxyClashRuleFileGenerator : ClashRuleFileGenerator("Proxy.list") {
    private val blackMatrixFilePrefix: Set<BlackMatrixPath> = setOf(
        BlackMatrixPath("YouTube"),
        BlackMatrixPath("Google"),
        BlackMatrixPath("GoogleDrive"),
        BlackMatrixPath("YouTubeMusic"),
        BlackMatrixPath("GitHub"),
        BlackMatrixPath("OneDrive"),
        BlackMatrixPath("Microsoft"),
        BlackMatrixPath("AppStore"),
        BlackMatrixPath("iCloud"),
        BlackMatrixPath("TestFlight"),
        BlackMatrixPath("FitnessPlus"),
        BlackMatrixPath("AppleMail"),
        BlackMatrixPath("AppleMusic"),
        BlackMatrixPath("AppleNews"),
        BlackMatrixPath("AppleTV"),
        BlackMatrixPath("Siri"),
        BlackMatrixPath("Apple"),
        BlackMatrixPath("Global"),
        BlackMatrixPath("Proxy"),
        BlackMatrixPath("GlobalMedia"),
        BlackMatrixPath("Speedtest"),
        BlackMatrixPath("Telegram"),
        BlackMatrixPath("PotatoChat"),
        BlackMatrixPath("KakaoTalk"),
        BlackMatrixPath("Line"),
        BlackMatrixPath("Netflix"),
        BlackMatrixPath("Dubox"),
//        BlackMatrixPath("TikTok"),// 这个配置有点问题，会把很多头条系的服务算进去
        BlackMatrixPath("Disney"),
        BlackMatrixPath("Twitter"),
        BlackMatrixPath("Cloudflare"),
        BlackMatrixPath("Facebook"),
        BlackMatrixPath("Spotify"),
        BlackMatrixPath("Wikipedia"),
        BlackMatrixPath("Discord"),
        BlackMatrixPath("Mail"),
        BlackMatrixPath("PayPal"),
        BlackMatrixPath("Spark"),
        BlackMatrixPath("Sony"),
        BlackMatrixPath("LastPass"),
        BlackMatrixPath("BBC"),
        BlackMatrixPath("Amazon"),
        BlackMatrixPath("Instagram"),
        BlackMatrixPath("Whatsapp"),
        BlackMatrixPath("TeamViewer"),
        BlackMatrixPath("AsianMedia"),
        BlackMatrixPath("Bahamut"),
        BlackMatrixPath("Adobe"),
        BlackMatrixPath("AFP"),
        BlackMatrixPath("ATTWatchTV"),
        BlackMatrixPath("AbemaTV"),
        BlackMatrixPath("All4"),
        BlackMatrixPath("AmazonPrimeVideo"),
        BlackMatrixPath("Americasvoice"),
        BlackMatrixPath("AppleDaily"),
        BlackMatrixPath("BoXun"),
        BlackMatrixPath("CBS"),
        BlackMatrixPath("CNN"),
        BlackMatrixPath("CableTV"),
        BlackMatrixPath("DAZN"),
        BlackMatrixPath("Dailymotion"),
        BlackMatrixPath("Deezer"),
        BlackMatrixPath("EncoreTVB"),
        BlackMatrixPath("Fox"),
        BlackMatrixPath("HBO"),
        BlackMatrixPath("HWTV"),
        BlackMatrixPath("Huffpost"),
        BlackMatrixPath("Hulu"),
        BlackMatrixPath("ITV"),
        BlackMatrixPath("JOOX"),
        BlackMatrixPath("Japonx"),
        BlackMatrixPath("KKBOX"),
        BlackMatrixPath("Kantv"),
        BlackMatrixPath("LiTV"),
        BlackMatrixPath("LineTV"),
        BlackMatrixPath("LondonReal"),
        BlackMatrixPath("MOOV"),
        BlackMatrixPath("MeWatch"),
        BlackMatrixPath("My5"),
        BlackMatrixPath("NYPost"),
        BlackMatrixPath("NYTimes"),
        BlackMatrixPath("Nikkei"),
        BlackMatrixPath("PBS"),
        BlackMatrixPath("Pandora"),
        BlackMatrixPath("PandoraTV"),
        BlackMatrixPath("Qobuz"),
        BlackMatrixPath("RTHK"),
        BlackMatrixPath("SkyGO"),
        BlackMatrixPath("SoundCloud"),
        BlackMatrixPath("TIDAL"),
        BlackMatrixPath("TVB"),
        BlackMatrixPath("TaiWanGood"),
        BlackMatrixPath("VOA"),
        BlackMatrixPath("VidolTV"),
        BlackMatrixPath("Viki"),
        BlackMatrixPath("Vimeo"),
        BlackMatrixPath("ViuTV"),
        BlackMatrixPath("Voxmedia"),
        BlackMatrixPath("WeTV"),
        BlackMatrixPath("ZeeTV"),
        BlackMatrixPath("friDay"),
        BlackMatrixPath("iTalkBB"),
        BlackMatrixPath("AppleProxy"),
        BlackMatrixPath("Clubhouse"),
        BlackMatrixPath("ClubhouseIP"),
        BlackMatrixPath("9News"),
        BlackMatrixPath("9to5"),
        BlackMatrixPath("AOL"),
        BlackMatrixPath("Acer"),
        BlackMatrixPath("Adidas"),
        BlackMatrixPath("Akamai"),
        BlackMatrixPath("Apkpure"),
        BlackMatrixPath("Atlassian"),
        BlackMatrixPath("BMW"),
        BlackMatrixPath("Bestbuy"),
        BlackMatrixPath("Bloomberg"),
        BlackMatrixPath("Blued"),
        BlackMatrixPath("BrightCove"),
        BlackMatrixPath("Buypass"),
        BlackMatrixPath("CHT"),
        BlackMatrixPath("Canon"),
        BlackMatrixPath("Cisco"),
        BlackMatrixPath("Comodo"),
        BlackMatrixPath("DMM"),
        BlackMatrixPath("Dailymail"),
        BlackMatrixPath("Dell"),
        BlackMatrixPath("DigiCert"),
        BlackMatrixPath("Disqus"),
        BlackMatrixPath("Docker"),
        BlackMatrixPath("Dropbox"),
        BlackMatrixPath("DtDNS"),
        BlackMatrixPath("Duckduckgo"),
        BlackMatrixPath("DynDNS"),
        BlackMatrixPath("Dynu"),
        BlackMatrixPath("Emojipedia"),
        BlackMatrixPath("Espn"),
        BlackMatrixPath("FlipBoard"),
        BlackMatrixPath("Gettyimages"),
        BlackMatrixPath("Gigabyte"),
        BlackMatrixPath("GitBook"),
        BlackMatrixPath("GitLab"),
        BlackMatrixPath("GlobalSign"),
        BlackMatrixPath("Gucci"),
        BlackMatrixPath("HKBN"),
        BlackMatrixPath("HKedcity"),
        BlackMatrixPath("HP"),
        BlackMatrixPath("Heroku"),
        BlackMatrixPath("IBM"),
        BlackMatrixPath("IMDB"),
        BlackMatrixPath("Identrust"),
        BlackMatrixPath("Imgur"),
        BlackMatrixPath("Intel"),
        BlackMatrixPath("Jetbrains"),
        BlackMatrixPath("Jfrog"),
        BlackMatrixPath("Jquery"),
        BlackMatrixPath("Jsdelivr"),
        BlackMatrixPath("Jwplayer"),
        BlackMatrixPath("LG"),
        BlackMatrixPath("LastFM"),
        BlackMatrixPath("LivePerson"),
        BlackMatrixPath("Logitech"),
        BlackMatrixPath("MEGA"),
        BlackMatrixPath("Mailru"),
        BlackMatrixPath("Manorama"),
        BlackMatrixPath("McDonalds"),
        BlackMatrixPath("Mozilla"),
        BlackMatrixPath("Naver"),
        BlackMatrixPath("Nike"),
        BlackMatrixPath("Notion"),
        BlackMatrixPath("Nvidia"),
        BlackMatrixPath("Opera"),
        BlackMatrixPath("Oracle"),
        BlackMatrixPath("Oreilly"),
        BlackMatrixPath("PCCW"),
        BlackMatrixPath("Picsee"),
        BlackMatrixPath("Pinterest"),
        BlackMatrixPath("Pixiv"),
        BlackMatrixPath("Pixnet"),
        BlackMatrixPath("Protonmail"),
        BlackMatrixPath("Qualcomm"),
        BlackMatrixPath("Rakuten"),
        BlackMatrixPath("Rarbg"),
        BlackMatrixPath("Razer"),
        BlackMatrixPath("Reddit"),
        BlackMatrixPath("Samsung"),
        BlackMatrixPath("Sectigo"),
        BlackMatrixPath("Shopee"),
        BlackMatrixPath("Shopify"),
        BlackMatrixPath("Slack"),
        BlackMatrixPath("Sling"),
        BlackMatrixPath("SmarTone"),
        BlackMatrixPath("Snap"),
        BlackMatrixPath("SourceForge"),
        BlackMatrixPath("Stackexchange"),
        BlackMatrixPath("Starbucks"),
        BlackMatrixPath("SublimeText"),
        BlackMatrixPath("ThomsonReuters"),
        BlackMatrixPath("Tumblr"),
        BlackMatrixPath("Twitch"),
        BlackMatrixPath("VISA"),
        BlackMatrixPath("VK"),
        BlackMatrixPath("Vercel"),
        BlackMatrixPath("Verisign"),
        BlackMatrixPath("Verizon"),
        BlackMatrixPath("WIX"),
        BlackMatrixPath("Westerndigital"),
        BlackMatrixPath("Wikimedia"),
        BlackMatrixPath("Wordpress"),
        BlackMatrixPath("Yandex"),
        BlackMatrixPath("Zee"),
        BlackMatrixPath("Zendesk"),
        BlackMatrixPath("Zoho"),
        BlackMatrixPath("eBay"),
        BlackMatrixPath("Intercom"),
        BlackMatrixPath("Limelight"),
        BlackMatrixPath("Python"),
        BlackMatrixPath("Unity"),
        BlackMatrixPath("Cryptocurrency"),
        BlackMatrixPath("TelegramNL"),
        BlackMatrixPath("TelegramSG"),
        BlackMatrixPath("TelegramUS"),
        BlackMatrixPath("PChomeTW"),
        BlackMatrixPath("MOMOShop"),
        BlackMatrixPath("PChome"),
        BlackMatrixPath("ProxyLite"),
        BlackMatrixPath("Synology"),
        BlackMatrixPath("Dood"),
        BlackMatrixPath("Tesla"),
        BlackMatrixPath("Embl"),
        BlackMatrixPath("HashiCorp"),
        BlackMatrixPath("Scaleflex"),
        BlackMatrixPath("CWSeed"),
        BlackMatrixPath("EHGallery"),
        BlackMatrixPath("FuboTV"),
        BlackMatrixPath("NBC"),
        BlackMatrixPath("Faronics"),
        BlackMatrixPath("Salesforce"),
        BlackMatrixPath("Ubuntu"),
        BlackMatrixPath("iQIYIIntl"),
        BlackMatrixPath("GoogleFCM"),
        BlackMatrixPath("QuickConnect"),
        BlackMatrixPath("HamiVideo"),
        BlackMatrixPath("Emby"),
        BlackMatrixPath("PikPak"),
        BlackMatrixPath("Cake"),
        BlackMatrixPath("AmazonIP"),
        BlackMatrixPath("Binance"),
        BlackMatrixPath("GoogleEarth"),
        BlackMatrixPath("TeraBox"),
        BlackMatrixPath("BritboxUK"),
        BlackMatrixPath("DigitalOcean"),
        BlackMatrixPath("IKEA"),
        BlackMatrixPath("RemoteDesktop"),
        BlackMatrixPath("VikACG"),
        BlackMatrixPath("GlobalScholar"),
        BlackMatrixPath("Npmjs"),
        BlackMatrixPath("Sharethis"),
        BlackMatrixPath("Contentful"),
        BlackMatrixPath("Hkgolden"),
        BlackMatrixPath("Tmdb"),
        BlackMatrixPath("Entrust"),
        BlackMatrixPath("Haveibeenpwned"),
        BlackMatrixPath("Cnet"),
        BlackMatrixPath("Reabble"),
//        BlackMatrixPath("ChemeQuations"),
        BlackMatrixPath("Movefree"),
        BlackMatrixPath("Linguee"),
        BlackMatrixPath("Figma"),
        BlackMatrixPath("TrustWave"),
        BlackMatrixPath("Pubmatic"),
        BlackMatrixPath("SlideShare"),
        BlackMatrixPath("Flurry"),
        BlackMatrixPath("Collabora"),
        BlackMatrixPath("CyberTrust"),
        BlackMatrixPath("Patreon"),
        BlackMatrixPath("Addthis"),
        BlackMatrixPath("FreeCodeCamp"),
        BlackMatrixPath("Arphic"),
        BlackMatrixPath("1337x"),
        BlackMatrixPath("4chan"),
        BlackMatrixPath("OpenAI"),
        BlackMatrixPath("6park"),
        BlackMatrixPath("Accuweather"),
        BlackMatrixPath("Actalis"),
        BlackMatrixPath("NaSDDNS"),
        BlackMatrixPath("NivodTV"),
        BlackMatrixPath("Olevod"),
        BlackMatrixPath("Claude"),
        BlackMatrixPath("ChinaDNS"),
        BlackMatrixPath("Crypto"),
        BlackMatrixPath("MIUIPrivacy"),
        BlackMatrixPath("AdColony"),
        BlackMatrixPath("AddToAny"),
        BlackMatrixPath("AdobeActivation"),
        BlackMatrixPath("Aerogard"),
        BlackMatrixPath("Afdian"),
        BlackMatrixPath("AirWick"),
        BlackMatrixPath("ALJazeera"),
        BlackMatrixPath("AmazonTrust"),
        BlackMatrixPath("AMD"),
        BlackMatrixPath("AMP"),
        BlackMatrixPath("Anaconda"),
        BlackMatrixPath("AnandTech"),
        BlackMatrixPath("Android"),
        BlackMatrixPath("Anime"),
        BlackMatrixPath("Anonv"),
        BlackMatrixPath("Anthropic"),
        BlackMatrixPath("APKCombo"),
        BlackMatrixPath("AppLovin"),
        BlackMatrixPath("Threads"),
        BlackMatrixPath("Duolingo"),
        BlackMatrixPath("Civitai"),
        BlackMatrixPath("LinkedIn"),
        BlackMatrixPath("OKX"),
        BlackMatrixPath("TruthSocial"),
//        BlackMatrixPath("Zoom"),
        BlackMatrixPath("Zalo"),
        BlackMatrixPath("Gemini"),
        BlackMatrixPath("YouTube"),
        BlackMatrixPath("YouTubeMusic"),
        BlackMatrixPath("AppleMusic"),
        BlackMatrixPath("AppleTV"),
        BlackMatrixPath("GlobalMedia"),
        BlackMatrixPath("Netflix"),
        BlackMatrixPath("TikTok"),
        BlackMatrixPath("Disney"),
        BlackMatrixPath("Spotify"),
        BlackMatrixPath("Niconico"),
        BlackMatrixPath("BBC"),
        BlackMatrixPath("AsianMedia"),
        BlackMatrixPath("Bahamut"),
        BlackMatrixPath("Hulu"),
        BlackMatrixPath("PandoraTV"),
        BlackMatrixPath("TVB"),
        BlackMatrixPath("HBOHK"),
        BlackMatrixPath("HBOUSA"),
        BlackMatrixPath("HuluJP"),
        BlackMatrixPath("HuluUSA"),
        BlackMatrixPath("FOXNOW"),
        BlackMatrixPath("FOXPlus"),
        BlackMatrixPath("KKTV"),
        BlackMatrixPath("NaverTV"),
        BlackMatrixPath("NowE"),
        BlackMatrixPath("ParamountPlus"),
        BlackMatrixPath("PrimeVideo"),
        BlackMatrixPath("TVer"),
        BlackMatrixPath("myTVSUPER"),
        BlackMatrixPath("HBOAsia"),
        BlackMatrixPath("BiliBiliIntl"),
        BlackMatrixPath("DiscoveryPlus"),
        BlackMatrixPath("Overcast"),
        BlackMatrixPath("Peacock"),
        BlackMatrixPath("Emby"),
        BlackMatrixPath("Cake"),
        BlackMatrixPath("BritboxUK"),
        BlackMatrixPath("HKOpenTV"),
        BlackMatrixPath("Abema"),
        BlackMatrixPath("Acplay"),
        BlackMatrixPath("UKMedia"),
        BlackMatrixPath("USMedia"),
        BlackMatrixPath("YouTube"),
        BlackMatrixPath("YouTubeMusic"),
        BlackMatrixPath("AppleMusic"),
        BlackMatrixPath("AppleTV"),
        BlackMatrixPath("GlobalMedia"),
        BlackMatrixPath("Spotify"),
        BlackMatrixPath("BBC"),
        BlackMatrixPath("AsianMedia"),
        BlackMatrixPath("Bahamut"),
        BlackMatrixPath("TVB"),
        BlackMatrixPath("HBOHK"),
        BlackMatrixPath("HBOUSA"),
        BlackMatrixPath("HuluJP"),
        BlackMatrixPath("HuluUSA"),
//        BlackMatrixPath("MOOMusic"),
        BlackMatrixPath("IPTVOther"),
        BlackMatrixPath("Blizzard"),
        BlackMatrixPath("Steam"),
        BlackMatrixPath("Rockstar"),
        BlackMatrixPath("PlayStation"),
        BlackMatrixPath("Epic"),
        BlackMatrixPath("WildRift"),
        BlackMatrixPath("Supercell"),
        BlackMatrixPath("EA"),
        BlackMatrixPath("Garena"),
        BlackMatrixPath("Gog"),
        BlackMatrixPath("Nintendo"),
        BlackMatrixPath("OP"),
        BlackMatrixPath("Purikonejp"),
        BlackMatrixPath("Riot"),
        BlackMatrixPath("UBI"),
        BlackMatrixPath("Xbox"),
        BlackMatrixPath("Sony"),
        BlackMatrixPath("Battle"),
        BlackMatrixPath("Classic"),
        BlackMatrixPath("DiabloIII"),
        BlackMatrixPath("Hearthstone"),
        BlackMatrixPath("HeroesoftheStorm"),
        BlackMatrixPath("Overwatch"),
        BlackMatrixPath("StarCraftII"),
        BlackMatrixPath("WorldofWarcraft"),
        BlackMatrixPath("Origin"),
        BlackMatrixPath("Majsoul"),
        BlackMatrixPath("HoYoverse"),
        BlackMatrixPath("Game/Assassin'sCreed-Origins", "Assassin'sCreed-Origins"),
        BlackMatrixPath("Game/Assassin'sCreed-Odyssey", "Assassin'sCreed-Odyssey"),
        BlackMatrixPath("NGA"),
        BlackMatrixPath("Game/GameDownload", "GameDownload"),
        BlackMatrixPath("Game/Roblox", "Roblox"),
        BlackMatrixPath("Ubisoft"),
        BlackMatrixPath("2KGames"),
        BlackMatrixPath("Game/Nikke", "Nikke"),
        BlackMatrixPath("Developer"),
        BlackMatrixPath("Scholar"),
        BlackMatrixPath("PrivateTracker"),
        BlackMatrixPath("cloud/CloudGlobal", "CloudGlobal"),
        BlackMatrixPath("cloud/AmazonCloud", "AmazonCloud"),
        BlackMatrixPath("cloud/AkamaiCloud", "AkamaiCloud"),
        BlackMatrixPath("Linux"),
    )
    private val acL4SSRFiles: Set<ACL4SSRFile> = setOf(
        ACL4SSRFile("ABC"),
        ACL4SSRFile("AbemaTV"),
        ACL4SSRFile("Adobe"),
        ACL4SSRFile("Amazon"),
        ACL4SSRFile("AmazonIp"),
        ACL4SSRFile("AppleNews"),
        ACL4SSRFile("Bahamut"),
        ACL4SSRFile("BBC"),
        ACL4SSRFile("BBCiPlayer"),
        ACL4SSRFile("BilibiliHMT"),
        ACL4SSRFile("Blizzard"),
        ACL4SSRFile("DAZN"),
        ACL4SSRFile("Deezer"),
        ACL4SSRFile("Developer"),
        ACL4SSRFile("Discord"),
        ACL4SSRFile("DiscoveryPlus"),
        ACL4SSRFile("DisneyPlus"),
        ACL4SSRFile("Dmm"),
        ACL4SSRFile("Docker"),
        ACL4SSRFile("Dubox"),
        ACL4SSRFile("EHGallery"),
        ACL4SSRFile("EncoreTVB"),
        ACL4SSRFile("Epic"),
        ACL4SSRFile("F1"),
        ACL4SSRFile("FoxNow"),
        ACL4SSRFile("GameDownload"),
        ACL4SSRFile("HBO"),
        ACL4SSRFile("HBO_GO_HKG"),
        ACL4SSRFile("Hulu"),
        ACL4SSRFile("HuluJapan"),
        ACL4SSRFile("HWTV"),
        ACL4SSRFile("IqiyiHMT"),
        ACL4SSRFile("ITV"),
        ACL4SSRFile("Iwara"),
        ACL4SSRFile("Japonx"),
        ACL4SSRFile("JetBrains"),
        ACL4SSRFile("JOOX"),
        ACL4SSRFile("KakaoTalk"),
        ACL4SSRFile("KKBOX"),
        ACL4SSRFile("KKTV"),
        ACL4SSRFile("LiTV"),
        ACL4SSRFile("My5"),
        ACL4SSRFile("MyTVSuper"),
        ACL4SSRFile("Niconico"),
        ACL4SSRFile("Nintendo"),
        ACL4SSRFile("NivodTV"),
        ACL4SSRFile("Olevod"),
        ACL4SSRFile("Origin"),
        ACL4SSRFile("Pandora"),
        ACL4SSRFile("PBS"),
        ACL4SSRFile("Pixiv"),
        ACL4SSRFile("Porn"),
        ACL4SSRFile("Pornhub"),
        ACL4SSRFile("Qobuz"),
        ACL4SSRFile("Samsung"),
        ACL4SSRFile("Sony"),
        ACL4SSRFile("SoundCloud"),
        ACL4SSRFile("Spark"),
        ACL4SSRFile("Spotify"),
        ACL4SSRFile("Steam"),
        ACL4SSRFile("SteamCN"),
        ACL4SSRFile("SteamRegionCheck"),
        ACL4SSRFile("TaiWanGood"),
        ACL4SSRFile("TeraBox"),
        ACL4SSRFile("TIDAL"),
        ACL4SSRFile("TopBlockedSites"),
        ACL4SSRFile("Twitch"),
        ACL4SSRFile("VikACG"),
        ACL4SSRFile("ViuTV"),
        ACL4SSRFile("Wikipedia"),
        ACL4SSRFile("Xbox"),
        ACL4SSRFile("YYeTs"),
        ACL4SSRFile("Zoom"),
    )

    override suspend fun generate() = write { rules: MutableSet<ClashRule> ->
        // 添加自定义规则
        rules.add(ClashRule(ClashRule.Type.DOMAIN_SUFFIX, "rapidapi.com"))
        rules.add(ClashRule(ClashRule.Type.DOMAIN_SUFFIX, "openxlab.org.cn"))
        // 读取 BlackMatrix 配置文件
        blackMatrixFilePrefix.forEach { rules.addBlackMatrixFileRules(it) }
        // 读取 ACL4SSR 配置文件
        rules.addAll(acL4SSRFiles.flatMap { it.rules })
    }
}